"use strict";
import {
	getMyCaller, getMyOutsideCaller, TStackFrame,
	} from 'v8-stack'

type TBothFrames = [TStackFrame?, TStackFrame?]

export const getBoth = (): TBothFrames => {

	const result = secondFunc('both')
	if (Array.isArray(result)) {
		return result
	}
	else {
		throw new Error("Expected array, got TStackFrame")
	}
}

export const getDirect = (): (TStackFrame | undefined) => {

	const result = secondFunc('direct')
	if (Array.isArray(result)) {
		throw new Error("Got unexpected array")
	}
	return result
}

export const getOutside = (): (TStackFrame | undefined) => {

	const result = secondFunc('outside')
	if (Array.isArray(result)) {
		throw new Error("Got unexpected array")
	}
	return result
}

const secondFunc = (type: string): TBothFrames | (TStackFrame | undefined) => {

	return thirdFunc(type)
}

const thirdFunc = (type: string): TBothFrames | (TStackFrame | undefined) => {

	switch(type) {
		case 'both': {
			return [getMyCaller(), getMyCaller()]
		}
		case 'direct': {
			return getMyCaller()
		}
		case 'outside': {
			return getMyOutsideCaller()
		}
		default: {
			throw new Error(`Unknown type: ${type}`)
		}
	}
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidjgtbW9kdWxlLmNpdmV0LnRzeCIsInNvdXJjZXMiOlsidjgtbW9kdWxlLmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLFdBQVcsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsV0FBVyxDQUFDO0FBQzlDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVO0FBQ2xCLEFBQUE7QUFDQSxBQUFBLEFBQUEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQy9DLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFRLE1BQVAsT0FBTyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUNwQyxBQUFBO0FBQ0EsQUFBQSxDQUFPLE1BQU4sTUFBTSxDQUFDLENBQUUsQ0FBQyxVQUFVLENBQUEsQUFBQyxNQUFNLENBQUE7QUFDNUIsQUFBQSxDQUFDLEdBQUcsQ0FBQSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUN6QixBQUFBLEVBQUUsTUFBTSxDQUFDLE07Q0FBTSxDQUFBO0FBQ2YsQUFBQSxDQUFDLElBQUksQ0FBQSxDQUFBO0FBQ0wsQUFBQSxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFBLEFBQUMsaUNBQWlDLEM7Q0FBQSxDO0FBQUEsQ0FBQTtBQUNuRCxBQUFBO0FBQ0EsQUFBQSxBQUFBLE1BQU0sQ0FBVSxNQUFULFNBQVMsQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLEMsQyxDQUFDLEFBQUMsVyxZLENBQVksQ0FBQyxFQUFFLENBQUEsQ0FBQTtBQUN2QyxBQUFBO0FBQ0EsQUFBQSxDQUFPLE1BQU4sTUFBTSxDQUFDLENBQUUsQ0FBQyxVQUFVLENBQUEsQUFBQyxRQUFRLENBQUE7QUFDOUIsQUFBQSxDQUFDLEdBQUcsQ0FBQSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUEsQ0FBQTtBQUN6QixBQUFBLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUEsQUFBQyxzQkFBc0IsQztDQUFBLENBQUE7QUFDeEMsQUFBQSxDQUFDLE1BQU0sQ0FBQyxNO0FBQU0sQ0FBQTtBQUNkLEFBQUE7QUFDQSxBQUFBLEFBQUEsTUFBTSxDQUFXLE1BQVYsVUFBVSxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUMsQyxDLENBQUMsQUFBQyxXLFksQ0FBWSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQ3hDLEFBQUE7QUFDQSxBQUFBLENBQU8sTUFBTixNQUFNLENBQUMsQ0FBRSxDQUFDLFVBQVUsQ0FBQSxBQUFDLFNBQVMsQ0FBQTtBQUMvQixBQUFBLENBQUMsR0FBRyxDQUFBLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUEsQ0FBQSxDQUFBO0FBQ3pCLEFBQUEsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQSxBQUFDLHNCQUFzQixDO0NBQUEsQ0FBQTtBQUN4QyxBQUFBLENBQUMsTUFBTSxDQUFDLE07QUFBTSxDQUFBO0FBQ2QsQUFBQTtBQUNBLEFBQUEsQUFBVSxNQUFWLFVBQVUsQ0FBQyxDQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEMsQ0FBQyxXLFksQ0FBWSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzNELEFBQUE7QUFDQSxBQUFBLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQSxBQUFDLElBQUksQztBQUFBLENBQUE7QUFDdEIsQUFBQTtBQUNBLEFBQUEsQUFBUyxNQUFULFNBQVMsQ0FBQyxDQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEMsQ0FBQyxXLFksQ0FBWSxDQUFDLEVBQUUsQ0FBQSxDQUFBO0FBQzFELEFBQUE7QUFDQSxBQUFBLENBQUMsTUFBTSxDQUFBLEFBQUMsSUFBSSxDQUFBLENBQUEsQ0FBQTtBQUNaLEFBQUEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFBLENBQUEsQ0FBQTtBQUNiLEFBQUEsR0FBRyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQztFQUFDLENBQUE7QUFDeEMsQUFBQSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUEsQ0FBQSxDQUFBO0FBQ2YsQUFBQSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQztFQUFDLENBQUE7QUFDdkIsQUFBQSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUEsQ0FBQSxDQUFBO0FBQ2hCLEFBQUEsR0FBRyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQztFQUFDLENBQUE7QUFDOUIsQUFBQSxFQUFFLE9BQUksQ0FBQSxDQUFBLENBQUE7QUFDTixBQUFBLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUEsQUFBQyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FDekMsQztFQUFBLEM7Q0FBQSxDO0FBQUEiLCJuYW1lcyI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdGdldE15Q2FsbGVyLCBnZXRNeU91dHNpZGVDYWxsZXIsIFRTdGFja0ZyYW1lLFxuXHR9IGZyb20gJ3Y4LXN0YWNrJ1xuXG50eXBlIFRCb3RoRnJhbWVzID0gW1RTdGFja0ZyYW1lPywgVFN0YWNrRnJhbWU/XVxuXG5leHBvcnQgZ2V0Qm90aCA6PSAoKTogVEJvdGhGcmFtZXMgPT5cblxuXHRyZXN1bHQgOj0gc2Vjb25kRnVuYyAnYm90aCdcblx0aWYgQXJyYXkuaXNBcnJheShyZXN1bHQpXG5cdFx0cmV0dXJuIHJlc3VsdFxuXHRlbHNlXG5cdFx0dGhyb3cgbmV3IEVycm9yIFwiRXhwZWN0ZWQgYXJyYXksIGdvdCBUU3RhY2tGcmFtZVwiXG5cbmV4cG9ydCBnZXREaXJlY3QgOj0gKCk6IFRTdGFja0ZyYW1lPyA9PlxuXG5cdHJlc3VsdCA6PSBzZWNvbmRGdW5jICdkaXJlY3QnXG5cdGlmIEFycmF5LmlzQXJyYXkocmVzdWx0KVxuXHRcdHRocm93IG5ldyBFcnJvciBcIkdvdCB1bmV4cGVjdGVkIGFycmF5XCJcblx0cmV0dXJuIHJlc3VsdFxuXG5leHBvcnQgZ2V0T3V0c2lkZSA6PSAoKTogVFN0YWNrRnJhbWU/ID0+XG5cblx0cmVzdWx0IDo9IHNlY29uZEZ1bmMgJ291dHNpZGUnXG5cdGlmIEFycmF5LmlzQXJyYXkocmVzdWx0KVxuXHRcdHRocm93IG5ldyBFcnJvciBcIkdvdCB1bmV4cGVjdGVkIGFycmF5XCJcblx0cmV0dXJuIHJlc3VsdFxuXG5zZWNvbmRGdW5jIDo9ICh0eXBlOiBzdHJpbmcpOiBUQm90aEZyYW1lcyB8IFRTdGFja0ZyYW1lPyA9PlxuXG5cdHJldHVybiB0aGlyZEZ1bmMgdHlwZVxuXG50aGlyZEZ1bmMgOj0gKHR5cGU6IHN0cmluZyk6IFRCb3RoRnJhbWVzIHwgVFN0YWNrRnJhbWU/ID0+XG5cblx0c3dpdGNoIHR5cGVcblx0XHR3aGVuICdib3RoJ1xuXHRcdFx0cmV0dXJuIFtnZXRNeUNhbGxlcigpLCBnZXRNeUNhbGxlcigpXVxuXHRcdHdoZW4gJ2RpcmVjdCdcblx0XHRcdHJldHVybiBnZXRNeUNhbGxlcigpXG5cdFx0d2hlbiAnb3V0c2lkZSdcblx0XHRcdHJldHVybiBnZXRNeU91dHNpZGVDYWxsZXIoKVxuXHRcdGVsc2Vcblx0XHRcdHRocm93IG5ldyBFcnJvciBcIlVua25vd24gdHlwZTogI3t0eXBlfVwiIl19