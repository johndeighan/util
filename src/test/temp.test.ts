"use strict";
// temp.test.civet - from temp.test.civet

import {undef, assert, croak} from 'datatypes'
import {o} from 'llutils'
import {DBG} from 'logger'
import {relpath} from 'fsys'
import {
	execCmd, execCmdSync, procOneFile, doCompileCivet,
	} from 'exec'
import {
	TStackFrame, getV8Stack, getMyCaller,
	getMyOutsideCaller, getV8StackStr,
	} from 'v8-stack'
import {
	equal, like, succeeds, objListLike, setDirTree,
	} from 'unit-test';

// ---------------------------------------------------------------------------

(function() {
	let stack1: TStackFrame[] = []
	let stack1Str: string = ''

	const main = () => {
		func1()
	}

	const func1 = function() {
		stack1 = getV8Stack()
		stack1Str = getV8StackStr()
		return
	}

	main()

	objListLike(stack1, [
		{
			type: 'function',
			name: 'func1',
			fileName: 'src/test/temp.test.civet',
			line: 28
			},
		{
			type: 'function',
			name: 'main',
			fileName: 'src/test/temp.test.civet',
			line: 25
			},
		{
			type: 'function',
			name: '<anon>',
			fileName: 'src/test/temp.test.civet',
			line: 32
			},
		{
			type: 'script',
			fileName: 'src/test/temp.test.civet',
			line: 32
			}
		])

	equal(stack1Str, `[function func1    ] src/test/temp.test.civet:12:2
[function main     ] src/test/temp.test.civet:8:2
[function <anon>   ] src/test/temp.test.civet:15:2
[script            ] src/test/temp.test.civet:43:1`)
}

	)()


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjL3Rlc3QvdGVtcC50ZXN0LmNpdmV0LnRzeCIsInNvdXJjZXMiOlsic3JjL3Rlc3QvdGVtcC50ZXN0LmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEseUNBQXdDO0FBQ3hDLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQzlDLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUztBQUN6QixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVE7QUFDMUIsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQzVCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQztBQUNSLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsY0FBYyxDQUFDO0FBQ25ELENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ2QsQUFBQSxBQUFBLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLENBQUM7QUFDdEMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQztBQUNuQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVTtBQUNsQixBQUFBLEFBQUEsTUFBTSxDQUFDLENBQUM7QUFDUixDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUNoRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVyxDQUFXO0FBQ25CLEFBQUE7QUFDQSxBQUFBLDhFQUE2RTtBQUM3RSxBQUFBO0FBQ0EsQUFBQSxBQUFBLENBQUksUUFBSCxDQUFDLENBQUksQ0FBQSxDQUFBO0FBQ04sQUFBQSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsQUFBQSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDM0IsQUFBQTtBQUNBLEFBQUEsQ0FBSyxNQUFKLElBQUksQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBLENBQUE7QUFDZCxBQUFBLEVBQUUsS0FBSyxDQUFDLEM7Q0FBQyxDQUFBO0FBQ1QsQUFBQTtBQUNBLEFBQUEsQ0FBTSxNQUFMLEtBQUssQ0FBQyxDQUFFLENBQUksUUFBSCxDQUFDLENBQUksQ0FBQSxDQUFBO0FBQ2YsQUFBQSxFQUFFLE1BQU0sQyxDQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkIsQUFBQSxFQUFFLFNBQVMsQyxDQUFFLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDN0IsQUFBQSxFQUFFLE07Q0FBTSxDQUFBO0FBQ1IsQUFBQTtBQUNBLEFBQUEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNQLEFBQUE7QUFDQSxBQUFBLENBQUMsV0FBVyxDQUFBLEFBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN0QixBQUFBLEVBQUUsQ0FBQztBQUNILEFBQUEsR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLENBQUE7QUFDbkIsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQTtBQUNoQixBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsMEJBQTBCLENBQUE7QUFDdkMsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUU7QUFDWCxHQUFHLENBQUMsQ0FBQTtBQUNKLEFBQUEsRUFBRSxDQUFDO0FBQ0gsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsQ0FBQTtBQUNuQixBQUFBLEdBQUcsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFBO0FBQ2YsQUFBQSxHQUFHLFFBQVEsQ0FBQyxDQUFDLDBCQUEwQixDQUFBO0FBQ3ZDLEFBQUEsR0FBRyxJQUFJLENBQUMsQ0FBQyxFQUFFO0FBQ1gsR0FBRyxDQUFDLENBQUE7QUFDSixBQUFBLEVBQUUsQ0FBQztBQUNILEFBQUEsR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLENBQUE7QUFDbkIsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQTtBQUNqQixBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsMEJBQTBCLENBQUE7QUFDdkMsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUU7QUFDWCxHQUFHLENBQUMsQ0FBQTtBQUNKLEFBQUEsRUFBRSxDQUFDO0FBQ0gsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQTtBQUNqQixBQUFBLEdBQUcsUUFBUSxDQUFDLENBQUMsMEJBQTBCLENBQUE7QUFDdkMsQUFBQSxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUU7QUFDWCxHQUFHLENBQUM7QUFDSixBQUFBLEVBQUUsQ0FBQyxDQUFBO0FBQ0gsQUFBQTtBQUNBLEFBQUEsQ0FBQyxLQUFLLENBQUEsQUFBQyxTQUFTLENBQUMsQ0FBQyxDQUFHO0FBQ3JCO0FBQ0E7QUFDQSxrREFFRSxDQUFHLEM7QUFBQSxDQUFBO0FBQ0w7QUFDQSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ0o7QUFDQSIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyB0ZW1wLnRlc3QuY2l2ZXQgLSBmcm9tIHRlbXAudGVzdC5jaXZldFxyXG5cclxuaW1wb3J0IHt1bmRlZiwgYXNzZXJ0LCBjcm9ha30gZnJvbSAnZGF0YXR5cGVzJ1xyXG5pbXBvcnQge299IGZyb20gJ2xsdXRpbHMnXHJcbmltcG9ydCB7REJHfSBmcm9tICdsb2dnZXInXHJcbmltcG9ydCB7cmVscGF0aH0gZnJvbSAnZnN5cydcclxuaW1wb3J0IHtcclxuXHRleGVjQ21kLCBleGVjQ21kU3luYywgcHJvY09uZUZpbGUsIGRvQ29tcGlsZUNpdmV0LFxyXG5cdH0gZnJvbSAnZXhlYydcclxuaW1wb3J0IHtcclxuXHRUU3RhY2tGcmFtZSwgZ2V0VjhTdGFjaywgZ2V0TXlDYWxsZXIsXHJcblx0Z2V0TXlPdXRzaWRlQ2FsbGVyLCBnZXRWOFN0YWNrU3RyLFxyXG5cdH0gZnJvbSAndjgtc3RhY2snXHJcbmltcG9ydCB7XHJcblx0ZXF1YWwsIGxpa2UsIHN1Y2NlZWRzLCBvYmpMaXN0TGlrZSwgc2V0RGlyVHJlZSxcclxuXHR9IGZyb20gJ3VuaXQtdGVzdCdcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4oKCkgLT5cclxuXHRsZXQgc3RhY2sxOiBUU3RhY2tGcmFtZVtdID0gW11cclxuXHRsZXQgc3RhY2sxU3RyOiBzdHJpbmcgPSAnJ1xyXG5cclxuXHRtYWluIDo9ICgpID0+XHJcblx0XHRmdW5jMSgpXHJcblxyXG5cdGZ1bmMxIDo9ICgpIC0+XHJcblx0XHRzdGFjazEgPSBnZXRWOFN0YWNrKClcclxuXHRcdHN0YWNrMVN0ciA9IGdldFY4U3RhY2tTdHIoKVxyXG5cdFx0cmV0dXJuXHJcblxyXG5cdG1haW4oKVxyXG5cclxuXHRvYmpMaXN0TGlrZSBzdGFjazEsIFtcclxuXHRcdHtcclxuXHRcdFx0dHlwZTogJ2Z1bmN0aW9uJ1xyXG5cdFx0XHRuYW1lOiAnZnVuYzEnXHJcblx0XHRcdGZpbGVOYW1lOiAnc3JjL3Rlc3QvdGVtcC50ZXN0LmNpdmV0J1xyXG5cdFx0XHRsaW5lOiAyOFxyXG5cdFx0XHR9XHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdmdW5jdGlvbidcclxuXHRcdFx0bmFtZTogJ21haW4nXHJcblx0XHRcdGZpbGVOYW1lOiAnc3JjL3Rlc3QvdGVtcC50ZXN0LmNpdmV0J1xyXG5cdFx0XHRsaW5lOiAyNVxyXG5cdFx0XHR9XHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdmdW5jdGlvbidcclxuXHRcdFx0bmFtZTogJzxhbm9uPidcclxuXHRcdFx0ZmlsZU5hbWU6ICdzcmMvdGVzdC90ZW1wLnRlc3QuY2l2ZXQnXHJcblx0XHRcdGxpbmU6IDMyXHJcblx0XHRcdH1cclxuXHRcdHtcclxuXHRcdFx0dHlwZTogJ3NjcmlwdCdcclxuXHRcdFx0ZmlsZU5hbWU6ICdzcmMvdGVzdC90ZW1wLnRlc3QuY2l2ZXQnXHJcblx0XHRcdGxpbmU6IDMyXHJcblx0XHRcdH1cclxuXHRcdF1cclxuXHJcblx0ZXF1YWwgc3RhY2sxU3RyLCBcIlwiXCJcclxuXHRcdFtmdW5jdGlvbiBmdW5jMSAgICBdIHNyYy90ZXN0L3RlbXAudGVzdC5jaXZldDoxMjoyXHJcblx0XHRbZnVuY3Rpb24gbWFpbiAgICAgXSBzcmMvdGVzdC90ZW1wLnRlc3QuY2l2ZXQ6ODoyXHJcblx0XHRbZnVuY3Rpb24gPGFub24+ICAgXSBzcmMvdGVzdC90ZW1wLnRlc3QuY2l2ZXQ6MTU6MlxyXG5cdFx0W3NjcmlwdCAgICAgICAgICAgIF0gc3JjL3Rlc3QvdGVtcC50ZXN0LmNpdmV0OjQzOjFcclxuXHRcdFwiXCJcIlxyXG5cclxuXHQpKClcclxuXHJcbiJdfQ==