"use strict";
// dir-tree.lib.test.civet

import {doParse} from 'parser'
import {equal} from 'unit-test'

// ---------------------------------------------------------------------------

equal(await doParse('dir-tree', `./src
file.txt
	abcdef`), [
	{ op: 'barf', path: './src/file.txt', contents: "abcdef"}
	])

equal(await doParse('dir-tree', `./src clear
file.txt
	abc`), [
	{ op: 'clearDir', path: './src'},
	{ op: 'barf', path: './src/file.txt', contents: "abc"}
	])

equal(await doParse('dir-tree', `./src clear
/temp
	file.txt
		abc
		def`), [
	{ op: 'clearDir', path: './src'},
	{ op: 'barf', path: './src/temp/file.txt', contents: "abc\ndef"}
	])

equal(await doParse('dir-tree', `./src/test clear
/temp
	/next
		file.txt
			abc
			def`), [
	{ op: 'clearDir', path: './src/test'},
	{ op: 'barf', path: './src/test/temp/next/file.txt', contents: "abc\ndef"}
	])

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjXFx0ZXN0XFxkaXItdHJlZS5wYXJzZS50ZXN0LmNpdmV0LnRzeCIsInNvdXJjZXMiOlsic3JjXFx0ZXN0XFxkaXItdHJlZS5wYXJzZS50ZXN0LmNpdmV0Il0sIm1hcHBpbmdzIjoiO0FBQUEsMEJBQXlCO0FBQ3pCLEFBQUE7QUFDQSxBQUFBLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRO0FBQzlCLEFBQUEsQUFBQSxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVztBQUMvQixBQUFBO0FBQ0EsQUFBQSw4RUFBNkU7QUFDN0UsQUFBQTtBQUNBLEFBQUEsQUFBQSxLQUFLLENBQUEsQUFBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUc7QUFDbkM7QUFDQSxPQUVDLENBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNSLEFBQUEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDMUQsQUFBQSxDQUFDLENBQUMsQ0FBQTtBQUNGLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFHO0FBQ25DO0FBQ0EsSUFFQyxDQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDUixBQUFBLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQ2pDLEFBQUEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDdkQsQUFBQSxDQUFDLENBQUMsQ0FBQTtBQUNGLEFBQUE7QUFDQSxBQUFBLEFBQUEsS0FBSyxDQUFBLEFBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEtBRUMsQ0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ1IsQUFBQSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQTtBQUNqQyxBQUFBLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDO0FBQ2pFLEFBQUEsQ0FBQyxDQUFDLENBQUE7QUFDRixBQUFBO0FBQ0EsQUFBQSxBQUFBLEtBQUssQ0FBQSxBQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BRUMsQ0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ1IsQUFBQSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQTtBQUN0QyxBQUFBLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLCtCQUErQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDO0FBQzNFLEFBQUEsQ0FBQyxDQUFDLENBQUE7QUFDRiIsIm5hbWVzIjpbXSwic291cmNlc0NvbnRlbnQiOlsiIyBkaXItdHJlZS5saWIudGVzdC5jaXZldFxyXG5cclxuaW1wb3J0IHtkb1BhcnNlfSBmcm9tICdwYXJzZXInXHJcbmltcG9ydCB7ZXF1YWx9IGZyb20gJ3VuaXQtdGVzdCdcclxuXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5lcXVhbCBhd2FpdCBkb1BhcnNlKCdkaXItdHJlZScsIFwiXCJcIlxyXG5cdC4vc3JjXHJcblx0ZmlsZS50eHRcclxuXHRcdGFiY2RlZlxyXG5cdFwiXCJcIiksIFtcclxuXHR7IG9wOiAnYmFyZicsIHBhdGg6ICcuL3NyYy9maWxlLnR4dCcsIGNvbnRlbnRzOiBcImFiY2RlZlwifVxyXG5cdF1cclxuXHJcbmVxdWFsIGF3YWl0IGRvUGFyc2UoJ2Rpci10cmVlJywgXCJcIlwiXHJcblx0Li9zcmMgY2xlYXJcclxuXHRmaWxlLnR4dFxyXG5cdFx0YWJjXHJcblx0XCJcIlwiKSwgW1xyXG5cdHsgb3A6ICdjbGVhckRpcicsIHBhdGg6ICcuL3NyYyd9XHJcblx0eyBvcDogJ2JhcmYnLCBwYXRoOiAnLi9zcmMvZmlsZS50eHQnLCBjb250ZW50czogXCJhYmNcIn1cclxuXHRdXHJcblxyXG5lcXVhbCBhd2FpdCBkb1BhcnNlKCdkaXItdHJlZScsIFwiXCJcIlxyXG5cdC4vc3JjIGNsZWFyXHJcblx0L3RlbXBcclxuXHRcdGZpbGUudHh0XHJcblx0XHRcdGFiY1xyXG5cdFx0XHRkZWZcclxuXHRcIlwiXCIpLCBbXHJcblx0eyBvcDogJ2NsZWFyRGlyJywgcGF0aDogJy4vc3JjJ31cclxuXHR7IG9wOiAnYmFyZicsIHBhdGg6ICcuL3NyYy90ZW1wL2ZpbGUudHh0JywgY29udGVudHM6IFwiYWJjXFxuZGVmXCJ9XHJcblx0XVxyXG5cclxuZXF1YWwgYXdhaXQgZG9QYXJzZSgnZGlyLXRyZWUnLCBcIlwiXCJcclxuXHQuL3NyYy90ZXN0IGNsZWFyXHJcblx0L3RlbXBcclxuXHRcdC9uZXh0XHJcblx0XHRcdGZpbGUudHh0XHJcblx0XHRcdFx0YWJjXHJcblx0XHRcdFx0ZGVmXHJcblx0XCJcIlwiKSwgW1xyXG5cdHsgb3A6ICdjbGVhckRpcicsIHBhdGg6ICcuL3NyYy90ZXN0J31cclxuXHR7IG9wOiAnYmFyZicsIHBhdGg6ICcuL3NyYy90ZXN0L3RlbXAvbmV4dC9maWxlLnR4dCcsIGNvbnRlbnRzOiBcImFiY1xcbmRlZlwifVxyXG5cdF1cclxuIl19